# CLAUDE.md

## üß† Purpose

This document outlines how we use Anthropic Claude to assist Kotlin development for services deployed in AWS ‚Äî including code generation, cloud integration, and infrastructure guidance.

## üîß How We Use Claude

- Writing idiomatic Kotlin for backend services (e.g. Ktor, Spring Boot)
- Generating AWS SDK usage code (S3, DynamoDB, SNS, etc.)
- Refactoring legacy Java services into Kotlin
- Writing infrastructure glue code (e.g. Lambda handlers)
- Building Kotlin-based CLI tools or microservices
- Generating Terraform or CloudFormation snippets
- Reviewing IAM policies and JSON structures

## üí¨ Prompting Guidelines

When prompting Claude:

- **Be scoped**: e.g., ‚ÄúWrite a Kotlin function to upload to S3 using AWS SDK v2‚Äù
- **Include relevant imports, configs, or sample IAM policies**
- **Specify AWS region, runtime (JVM/Java 17), and deployment platform (Lambda, ECS, EC2, etc.)**
- **Use markdown code blocks for clarity**

### üßæ Example Prompt

```
Generate a Kotlin function that writes a file to an S3 bucket using AWS SDK for Kotlin (v2).
```

Or:

```
Refactor the following Lambda handler to be coroutine-based with proper exception handling:

```kotlin
class Handler : RequestHandler<SQSEvent, Unit> {
    override fun handleRequest(event: SQSEvent?, context: Context?) {
        // ...
    }
}
```
```

## ‚ö†Ô∏è Limitations

- Claude may hallucinate AWS API calls or config syntax ‚Äî **validate against AWS SDK docs**
- Infra code like IAM roles or Terraform might be insecure or overly permissive
- AWS SDK for Kotlin is still evolving; Claude may assume incorrect package paths or method names
- AWS integrations with Kotlin are less common ‚Äî check for community best practices

## ‚úÖ Best Practices

- Use `// Generated by Claude` for tracking inserted code
- Review IAM policies line by line ‚Äî avoid wildcard permissions (`"Action": "*"` or `"Resource": "*"`)
- Prefer Kotlin idioms (e.g., sealed classes, coroutines, `Result`) over Java-like error handling
- Validate deployments via `terraform plan` or `sam validate` after any AI-generated change
- Use `ktlint`, `detekt`, and integration tests to catch issues early

## ‚òÅÔ∏è AWS Resources

- [AWS SDK for Kotlin (v2)](https://docs.aws.amazon.com/sdk-for-kotlin/latest/developer-guide/)
- [AWS Lambda with Kotlin](https://docs.aws.amazon.com/lambda/latest/dg/java-handler.html)
- [Deploying Kotlin with SAM CLI](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-getting-started.html)
- [IAM Policy Reference](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html)
- [DynamoDB Kotlin Guide](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GettingStarted.Kotlin.html)
- [AWS CLI and SDK Examples](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html)


## üîí Safety & Privacy

- Never include AWS credentials, ARNs, or secrets in prompts
- Avoid copying full Terraform states or CloudFormation templates into Claude
- Follow internal AI usage guidelines and AWS acceptable use policies

## üìö Additional References

- [Anthropic Claude Docs](https://docs.anthropic.com/)
- [Prompt Engineering for AWS Bedrock](https://docs.aws.amazon.com/bedrock/latest/userguide/prompt-engineering.html)
- [Terraform AWS Provider](https://registry.terraform.io/providers/hashicorp/aws/latest/docs) 

